# Sanjab Instagram Analytics - ابزار جامع تحلیل

## توضیحات پروژه

این پروژه یک ابزار جامع و پیشرفته برای استخراج و تحلیل آمار پیج‌های اینستاگرام از پلتفرم Sanjab است. این ابزار به صورت خودکار وارد حساب کاربری Sanjab می‌شود، لیستی از پیج‌های اینستاگرام را از فایل CSV می‌خواند و تمام آمارهای مهم را در یک فایل CSV جامع و یکتا ذخیره می‌کند.

## ویژگی‌های اصلی

- **ورود خودکار**: ورود خودکار به حساب کاربری Sanjab
- **پردازش دسته‌ای**: پردازش چندین پیج اینستاگرام به صورت خودکار
- **استخراج آمار**: استخراج آمارهای مهم مانند نرخ تعامل، میانگین لایک، کامنت و غیره
- **ذخیره‌سازی**: ذخیره نتایج در فایل‌های CSV جداگانه برای هر پیج
- **پشتیبانی از فارسی**: پشتیبانی کامل از زبان فارسی در خروجی

## آمارهای جامع استخراج شده

### آمارهای اصلی:
- **نرخ تعامل (Engagement Rate)** - درصد تعامل کاربران
- **درصد رتبه نرخ تعامل** - رتبه در مقایسه با سایر پیج‌ها
- **درصد بهتر از** - درصد پیج‌هایی که از این پیج ضعیف‌ترند
- **درصد پیج‌های مشابه** - درصد پیج‌های مشابه

### آمارهای تعامل:
- **لایک به ازای هر پست** - میانگین لایک در هر پست
- **کامنت به ازای هر پست** - میانگین کامنت در هر پست
- **میانگین بازدید هر Reel** - میانگین بازدید ویدیوهای Reel
- **میانگین Share** - میانگین اشتراک‌گذاری

### نسبت‌های مهم:
- **نسبت بازدید به فالوور** - درصد بازدید نسبت به فالوور
- **نسبت لایک به فالوور** - درصد لایک نسبت به فالوور

## پیش‌نیازها

### راه‌اندازی خودکار (پیشنهادی)

برای راه‌اندازی خودکار پروژه، یکی از روش‌های زیر را انتخاب کنید:

#### روش 1: استفاده از فایل Batch (Windows)
```bash
setup.bat
```

#### روش 2: استفاده از Python Script
```bash
python setup.py
```

### راه‌اندازی دستی

#### نصب کتابخانه‌های مورد نیاز

```bash
# ایجاد محیط مجازی
python -m venv venv

# فعال‌سازی محیط مجازی (Windows)
venv\Scripts\activate

# فعال‌سازی محیط مجازی (Linux/Mac)
source venv/bin/activate

# نصب کتابخانه‌ها
pip install selenium
```

#### نصب ChromeDriver

1. ChromeDriver را از [اینجا](https://chromedriver.chromium.org/) دانلود کنید
2. آن را در مسیر PATH سیستم قرار دهید یا در همان پوشه پروژه قرار دهید

### فایل CSV ورودی

فایل `instagram_pages.csv` باید شامل نام پیج‌های اینستاگرام باشد (بدون @). مثال:

```csv
instagram_page
tehran.style
varzesh3
bartarinha
perspolis
esteghlal.fc
```

## نحوه استفاده

### روش 1: اجرای ساده
```bash
python run_analytics.py
```

### روش 2: اجرای پیشرفته
```bash
python sanjab_analytics.py
```

### روش 3: اجرای خودکار (Windows)
```bash
run.bat
```

### مراحل اجرا:

1. **فعال‌سازی محیط مجازی**:
   ```bash
   # Windows
   venv\Scripts\activate
   
   # Linux/Mac
   source venv/bin/activate
   ```

2. **اجرای اسکریپت**:
   - برای اجرای ساده: `python run_analytics.py`
   - برای اجرای پیشرفته: `python sanjab_analytics.py`

3. **وارد کردن اطلاعات ورود**: هنگام اجرا، ایمیل و رمز عبور Sanjab را وارد کنید

4. **انتظار برای تکمیل**: اسکریپت تمام پیج‌ها را تحلیل می‌کند

5. **دریافت فایل خروجی**: فایل CSV جامع با تمام آمارها ایجاد می‌شود

## ساختار فایل‌ها

```
sanjab_analysis/
├── sanjab_analytics.py   # اسکریپت اصلی جامع
├── run_analytics.py      # اسکریپت اجرای ساده
├── instagram_pages.csv   # لیست پیج‌های اینستاگرام
├── requirements.txt      # لیست کامل کتابخانه‌ها
├── requirements_simple.txt # لیست ساده کتابخانه‌ها
├── setup.py             # اسکریپت راه‌اندازی Python
├── setup.bat            # اسکریپت راه‌اندازی Windows
├── run.bat              # اسکریپت اجرای سریع Windows
├── venv/                # محیط مجازی Python
└── README.md            # این فایل
```

## توضیح کد

### تابع `login_to_sanjab()`
- مرورگر Chrome را راه‌اندازی می‌کند
- به صفحه ورود Sanjab می‌رود
- اطلاعات ورود را وارد می‌کند
- وارد حساب کاربری می‌شود

### تابع `search_instagram_page(driver, page_name)`
- باکس جستجو را پیدا می‌کند
- نام پیج اینستاگرام را جستجو می‌کند
- منتظر لود شدن نتایج می‌ماند

### تابع `extract_data(driver)`
- آمارهای مختلف پیج را از صفحه استخراج می‌کند
- داده‌ها را در قالب دیکشنری برمی‌گرداند

### تابع `save_to_csv(data, page_name)`
- داده‌های استخراج شده را در فایل CSV ذخیره می‌کند
- نام فایل شامل نام پیج و تاریخ/زمان است

### تابع `read_pages_from_csv(filename)`
- لیست پیج‌ها را از فایل CSV می‌خواند
- نام پیج‌ها را در قالب لیست برمی‌گرداند

### تابع `main()`
- تابع اصلی که کل فرآیند را هماهنگ می‌کند
- لیست پیج‌ها را می‌خواند
- برای هر پیج، جستجو و استخراج داده انجام می‌دهد

## خروجی

برای هر پیج، یک فایل CSV جداگانه ایجاد می‌شود با نام:
```
instagram_stats_[نام_پیج]_[تاریخ_زمان].csv
```

مثال:
```
instagram_stats_tehran.style_20241201_143022.csv
```

## نکات مهم

1. **امنیت**: اطلاعات ورود در کد قرار دارد. برای استفاده در محیط تولید، از متغیرهای محیطی استفاده کنید.

2. **نرخ درخواست**: بین هر درخواست 3 ثانیه مکث وجود دارد تا از محدودیت‌های سرور جلوگیری شود.

3. **مدیریت خطا**: کد شامل مدیریت خطا برای موارد مختلف است.

4. **مرورگر**: اسکریپت از Chrome استفاده می‌کند. اطمینان حاصل کنید که Chrome نصب باشد.

## عیب‌یابی

### خطای ChromeDriver
- اطمینان حاصل کنید که ChromeDriver نصب و در PATH قرار دارد
- نسخه ChromeDriver باید با نسخه Chrome شما سازگار باشد

### خطای ورود
- اطلاعات ورود را بررسی کنید
- اطمینان حاصل کنید که حساب کاربری فعال است

### خطای استخراج داده
- ممکن است ساختار صفحه Sanjab تغییر کرده باشد
- XPath های استفاده شده در کد را بررسی کنید

## مجوز

این پروژه برای استفاده آموزشی و شخصی طراحی شده است. لطفاً قوانین و مقررات Sanjab را رعایت کنید.

## مشارکت

برای بهبود این پروژه، می‌توانید:
- باگ‌ها را گزارش دهید
- ویژگی‌های جدید پیشنهاد دهید
- کد را بهبود دهید

## تماس

برای سوالات و پشتیبانی، با توسعه‌دهنده تماس بگیرید.
